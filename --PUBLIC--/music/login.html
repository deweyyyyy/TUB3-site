<!doctype html>
<html lang="en">
  <head>
    <script src="https://kit.fontawesome.com/0f81b9a2a2.js" crossorigin="anonymous"></script>
    <link href="./a.css?999" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script src="https://use.fontawesome.com/releases/v5.5.0/js/all.js" ></script>
    <script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-storage.js"></script> 
   <script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-database.js"></script>
   <script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-analytics.js"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Dewey's World Team">
    <meta name="generator" content="Hugo 0.101.0">
    <title>TUB3 Auth</title>
    <link rel="canonical" href="https://getbootstrap.com/docs/5.2/examples/sign-in/">
    <link href="https://getbootstrap.com/docs/5.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <!-- Favicons -->
    
    <link rel="icon" href="./files/image/logo3.png" sizes="32x32" type="image/png">
    <link rel="manifest" href="https://getbootstrap.com/docs/5.2/assets/img/favicons/manifest.json">
    
    <meta name="theme-color" content="#f5f5f5">
  </head>
 <script>
    var config = {
      apiKey: "AIzaSyBhd3_KEAOyJnbIp-vNd5YoVUiyOiaZuoQ",
      authDomain: "beta-deweysworld.firebaseapp.com",
      databaseURL: "https://beta-deweysworld-default-rtdb.firebaseio.com",
      projectId: "beta-deweysworld",
      storageBucket: "beta-deweysworld.appspot.com",
      messagingSenderId: "851425328095",
      appId: "1:851425328095:web:d3ccd702d04abe9f7fe26a",
      measurementId: "G-V3Q2GSB2RW"
    };
    firebase.initializeApp(config);
    const analytics = firebase.analytics();
  </script>
  <body class="text-center">   
  <main class="form-signin w-100 m-auto">
    <div id="lineicon" class="lineicon">
      <a style="background-color: transparent;height:100%;width:80px;" href="./index.html"><i class="fa-solid fa-plus"></i><br>Add</a>
      <a style="background-color: transparent;height:100%;width:80px;" href="./list.html"><i class="fa-solid fa-list"></i><br>List</a>
      <a style="background-color: transparent;height:100%;width:80px;" href="./account.html"><i class="fa-solid fa-user"></i><br>Account</a>
      <style>
          #lineicon {
              width: 240px;
              height: 50px;
              background-color: #ffffffd3; /* Default color for cart with items */
              color: #494949; /* Change the text color as needed */
              padding: 10px;
              border-radius: 20px;
              cursor: pointer;
              display: flex;
              align-items: center;
              justify-content: center; /* Center text horizontally */
              text-align: center;
          }
          #lineicon a {
              color: #000000a3;
              margin-top: 5px;
              margin-bottom: 5px;
              transition: 0.3s ease-in-out;
          }
          #lineicon a:hover {
              color: black;
              scale: 1.05;
          }
      </style>
  </div>
    <!--Cookie-->
    <style>
      .acookie { color: blue; text-decoration: none; }
      .alertcookie { display: none; padding: 20px; font-size: 12px; background-color: #f1ffba; color: rgb(0, 0, 0); border-radius: 20px; }
      .closecookie { margin-left: 15px; color: rgb(84, 84, 84); font-weight: bold; float: right; font-size: 22px; line-height: 20px; cursor: pointer; transition: 0.3s; }
      .closecookie:hover { color: rgb(255, 30, 30); }
    </style>
    
    <script>
      // Function to set a cookie with a given name, value, and expiration time
      function setCookie(name, value, minutes) {
        var d = new Date();
        d.setTime(d.getTime() + (minutes * 60 * 1000));
        var expires = "expires=" + d.toUTCString();
        document.cookie = name + "=" + value + ";" + expires + ";path=/";
      }
    
      // Function to get the value of a cookie by name
      function getCookie(name) {
        var decodedCookie = decodeURIComponent(document.cookie);
        var cookies = decodedCookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
          var cookie = cookies[i].trim();
          if (cookie.indexOf(name + "=") === 0) {
            return cookie.substring(name.length + 1);
          }
        }
        return "";
      }
    
      // Function to handle the click event on the close button
      function closeCookieBanner() {
        // Set a cookie named 'closedCookieBanner' with value 'true' and expiration time of 10 minutes
        setCookie('closedCookieBanner', 'true', 10);
        // Hide the cookie banner
        document.querySelector('.alertcookie').style.display = 'none';
      }
    
      // Function to check if the cookie banner should be displayed
      function checkCookieBanner() {
        // Get the value of the 'closedCookieBanner' cookie
        var closedCookieBanner = getCookie('closedCookieBanner');
        // Check if the cookie is not set or if it's been more than 10 minutes since it was set
        if (closedCookieBanner === '' || (closedCookieBanner === 'true' && Date.now() - new Date(closedCookieBanner) > 10 * 60 * 1000)) {
          // Show the cookie banner
          document.querySelector('.alertcookie').style.display = 'block';
        }
      }
    
      // Call the checkCookieBanner function when the page loads
      window.onload = checkCookieBanner;
    </script>
    
    <div class="alertcookie">
      <span class="closecookie" onclick="closeCookieBanner();">&times;</span>
      <strong>Cookies </strong>เราใช้คุ๊กกี้เพื่อเพิ่มประสบการณ์การใช้งานของคุณให้สมบูรณ์และมีประสิทธิภาพมากขึ้น ถ้าท่านใช้งานเว็บไซต์ของเราต่อไปถือว่าท่านได้ยอมรับ <a class="acookie" href="/privacy">นโยบายการคุ้มครองข้อมูลส่วนบุคคล</a>ของเราแล้ว
    </div>
    <!--Cookie-->

    <img class="mb-4" src="./logo.png" alt="" width="100" height="100">
    <h1 class="h3 mb-3 fw-normal">TUB3 Auth</h1>
    <h2 class="h3 mb-3 fw-normal">โปรดลงชื่อเข้าใช้เพื่อเข้าใช้บริการ</h2><br>

    <div class="container">
  
        <br /><br />
    
          <div id="login_panel" class='text-right' >
            <button class="btn_login "  >
            Sign In with Google
       </button>
       <br>
       <br>
  <div class="userpass">
    <input class="email"type="email" id="email_input" placeholder="Email">
  <input class="password"type="password" id="password_input" placeholder="Password">
  </div>
  <button class="btn_login2 "  >
    <i class="fa-solid fa-envelope"></i> Sign In
  </button>
  <a href="./register.html"><h6>Register new account?</h6></a>
  <a href="./reset.html"><h6>Forgot password?</h6></a>

             <br>
             <br>

    
              <!--  สร้าง span สำหรับ  --> 
              <span class="user_info" ></span>
              <!--  สร้าง ออกจากระบบ ระบบโดยกำหนดให้ยังไม่แสดงในครั้งแรก  --> 
              <button class="btn_sign_out " style="display:none" >
                     <i class="fa fa-sign-out-alt" ></i> Sign Out
              </button>
              <br><br>
              <a href="javascript:history.back()"><i class="fa-solid fa-backward"></i> Back</a>





<br><br><br><br>



              <div class="container" style="margin-top: 30px;">
                <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4">
                  <p class="col-md-4 mb-0 text-muted">&copy; 2024 TUB3 MANAGEMENT</p>
                  
              
                  <a href="/" class="col-md-4 d-flex align-items-center justify-content-center mb-3 mb-md-0 me-md-auto link-dark text-decoration-none">
                    <img src="./logo.png" style="width: 50px;" class="footer-logo">
                  </a>
              
                  <ul style="text-align: left;list-style-type: none;">
  
                    <li class="nav-item"><a href="./index.html" class="nav-link px-2 text-muted"><i class="fa-solid fa-plus"></i> Add</a></li>
                    <li class="nav-item"><a href="./list.html" class="nav-link px-2 text-muted"><i class="fa-solid fa-list"></i> List</a></li>
                    <li class="nav-item"><a href="./account.html" class="nav-link px-2 text-muted"><i class="fa-solid fa-user"></i> Account</a></li>
                    <!--<li class="nav-item"><a href="#" class="nav-link px-2 text-muted">FAQs</a></li>
                    <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">About</a></li> --> 
                  </ul>             
                </footer>
              </div>
        </div>
        
    <style>
      
    </style>
        <script>


          var timestampa=new Date().getTime();
          var currentURL = window.location.href;
          console.log(timestampa);



          $("#login_panel").find(".btn_login").on("click",function(){
            //เมื่อกดปุ่มเข้าสู่ระบบแล้ว ให้ไปที่ หน้าจอของ google
            var GoogleAuthProvider = new firebase.auth.GoogleAuthProvider();
            firebase.auth().signInWithPopup(GoogleAuthProvider);

    });

    $("#login_panel").find(".btn_login2").on("click", function() {
      // When the "btn_login" element inside the "login_panel" is clicked:
      
      // Get the user's email and password from input fields (replace these with your actual input field IDs)
      var email = $("#email_input").val();
      var password = $("#password_input").val();
      // Use Firebase's signInWithEmailAndPassword method for email and password authentication.
      firebase.auth().signInWithEmailAndPassword(email, password)
          .then(function(userCredential) {
              // Authentication successful, you can access user data if needed.
              var user = userCredential.user;
              alert("Authentication successful for user: " + user.email);
          })
          .catch(function(error) {
              // Handle authentication errors here.
              var errorCode = error.code;
              var errorMessage = error.message;
              alert("Authentication failed: " + errorCode + " - " + errorMessage);
          });
  });
    
    
    
        
    
    
    
               
                 //signout
                $("#login_panel").find(".btn_sign_out").on("click",function(){
                    //คำสั่ง ออกจการะบบ ของ firebase
                    firebase.auth().signOut().then(function() {
                        
                    });
    
                });
                //user changed
                firebase.auth().onAuthStateChanged(function(user) {
    
                    if (user)//user
                    {
              
                      console.log(user);
                      $("#login_panel").find(".btn_login").css("display","none");
                      $("#login_panel").find(".btn_sign_out").css("display","");
                      $("#login_panel").find(".user_info").html(user.displayName);
                     window.location.href = "./index.html";
                  } 
                  else // เมื่อผู้ใช้ไม่ได้อยู่ใน สถานะ login
                  {
                      $("#login_panel").find(".btn_login").css("display","");//แสดงปุ่ม เข้าสู่ระบบ
                      $("#login_panel").find(".btn_sign_out").css("display","none");//ซ่อนปุ่ม ออกจากระบบ
                      $("#login_panel").find(".user_info").html("");//ซ่อนชื่อผู้ใช้ 
                      
                     
    
                  }
                }); 
        </script>
    
    </div>
    
    
    


    

</main>


  </body>
</html>

